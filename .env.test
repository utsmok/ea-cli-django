# =============================================================================
# Test Environment Configuration for Easy Access Platform
# =============================================================================
# This file is used by pytest when running tests.
# It is NOT used in development or production.
#
# Usage:
#   export $(cat .env.test | xargs) && uv run pytest
# Or configure your IDE to load this file for test runs.

# -----------------------------------------------------------------------------
# Environment
# -----------------------------------------------------------------------------
ENV=test
# Identifies this as the test environment

# -----------------------------------------------------------------------------
# Django Settings
# -----------------------------------------------------------------------------
DEBUG=True
# True for easier debugging during tests

SECRET_KEY=test-secret-key-for-testing-only-do-not-use-in-production
# Fixed secret key for test reproducibility

ALLOWED_HOSTS=localhost,127.0.0.1,testserver
# testserver is used by Django's test client

# -----------------------------------------------------------------------------
# Database Configuration
# -----------------------------------------------------------------------------
DATABASE_URL=postgres://admin:dev_password@localhost:5432/test_copyright_db
# Separate test database to avoid conflicts with development data
# The database will be created and destroyed by pytest-django

# -----------------------------------------------------------------------------
# Redis Configuration
# -----------------------------------------------------------------------------
REDIS_URL=redis://localhost:6379/1
# Use Redis database 1 for tests (separate from dev database 0)

# -----------------------------------------------------------------------------
# External API Configuration
# -----------------------------------------------------------------------------
# NOTE: For automated testing, you may want to use dedicated test credentials
# or mock these APIs. Set TEST_OSIRIS_URL and TEST_CANVAS_API_TOKEN to
# point to test/staging environments if available.

# Canvas LMS API (for PDF downloads)
CANVAS_API_URL=https://utwente.instructure.com/api/v1
CANVAS_API_TOKEN=your-test-canvas-api-token-here
# For tests that require real Canvas API access

# Test-specific Canvas credentials (optional)
TEST_CANVAS_API_URL=https://utwente.instructure.com/api/v1
TEST_CANVAS_API_TOKEN=your-test-canvas-api-token-here
# If set, tests will use these instead of CANVAS_API_TOKEN

# Osiris (University of Twente course/teacher data)
OSIRIS_BASE_URL=https://utwente.osiris-student.nl
# Osiris typically doesn't have a separate test environment
# Tests should use read-only course codes to avoid side effects

# Test-specific Osiris configuration (optional)
TEST_OSIRIS_URL=https://utwente.osiris-student.nl
TEST_OSIRIS_COURSE_CODE=191154340
# Use a stable test course code that won't change

# -----------------------------------------------------------------------------
# Cache Settings
# -----------------------------------------------------------------------------
REDIS_CACHE_STATS=False
# Disable cache statistics during tests for cleaner output

FILE_EXISTS_TTL_DAYS=1
# Shorter TTL for tests

FILE_EXISTS_RATE_LIMIT_DELAY=0.01
# Faster rate limiting for tests (10ms instead of 50ms)

# -----------------------------------------------------------------------------
# Testing Settings
# -----------------------------------------------------------------------------
# The following settings are automatically applied when ENV=test:
# - Tasks use ImmediateBackend (synchronous execution)
# - Email backend is set to locmem (emails are not sent)
# - Media files use temp directory
# - Password hashing uses faster algorithm (for test speed)

# -----------------------------------------------------------------------------
# Logging
# -----------------------------------------------------------------------------
LOG_LEVEL=WARNING
# Reduce log noise during tests (set to DEBUG for troubleshooting test failures)
