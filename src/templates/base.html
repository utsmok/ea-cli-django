{% load static %}
<!doctype html>
<html lang="en" data-theme="ut">

<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>{% block title %}Easy Access Platform{% endblock %} | University of Twente</title>

  <!-- Tailwind CSS & DaisyUI -->
  <link href="https://cdn.jsdelivr.net/npm/daisyui@4.12.10/dist/full.min.css" rel="stylesheet" type="text/css" />
  <script src="https://cdn.tailwindcss.com"></script>

  <!-- Tailwind Configuration for UT Brand Theme -->
  <script>
    tailwind.config = {
      theme: {
        extend: {
          colors: {
            primary: '#007D9C',     // UT Blue
            'primary-focus': '#005D7D',
            secondary: '#CF0072',   // UT Pink
            'secondary-focus': '#B2014A',
            accent: '#4F2D7F',      // UT Purple
            'accent-focus': '#2F1957',
            neutral: '#686B6E',     // UT Grey
            'neutral-focus': '#8E9193',
            'base-100': '#FFFFFF',
            'base-200': '#F7F8F8',
            'base-300': '#F0F1F2',
            info: '#007D9C',
            'info-focus': '#005D7D',
            success: '#00675A',     // UT Dark Green
            'success-focus': '#004B48',
            warning: '#C60C30',     // UT Red
            'warning-focus': '#B0061C',
            error: '#822433',       // UT Dark Red
            'error-focus': '#62141E',
          },
        },
      },
      daisyui: {
        themes: [
          {
            ut: {
              "primary": "#007D9C",
              "primary-focus": "#005D7D",
              "primary-content": "#FFFFFF",
              "secondary": "#CF0072",
              "secondary-focus": "#B2014A",
              "secondary-content": "#FFFFFF",
              "accent": "#4F2D7F",
              "accent-focus": "#2F1957",
              "accent-content": "#FFFFFF",
              "neutral": "#686B6E",
              "neutral-focus": "#8E9193",
              "neutral-content": "#FFFFFF",
              "base-100": "#FFFFFF",
              "base-200": "#F7F8F8",
              "base-300": "#F0F1F2",
              "base-content": "#1E2328",
              "info": "#007D9C",
              "info-focus": "#005D7D",
              "info-content": "#FFFFFF",
              "success": "#00675A",
              "success-focus": "#004B48",
              "success-content": "#FFFFFF",
              "warning": "#C60C30",
              "warning-focus": "#B0061C",
              "warning-content": "#FFFFFF",
              "error": "#822433",
              "error-focus": "#62141E",
              "error-content": "#FFFFFF",
            },
          },
        ],
      },
    };
  </script>

  <!-- UT Brand Styles -->
  <link rel="stylesheet" href="{% static 'css/ut-brand.css' %}">

  <!-- HTMX -->
  <script src="https://unpkg.com/htmx.org@1.9.12"></script>

  <!-- Alpine.js -->
  <script src="https://cdn.jsdelivr.net/npm/alpinejs@3.14.8/dist/cdn.min.js" defer></script>

  {% block extra_css %}{% endblock %}
</head>

<body class="bg-base-200 min-h-screen flex flex-col" hx-headers='{"X-CSRFToken": "{{ csrf_token }}"}'>

  <!-- UT Navbar -->
  <nav class="ut-navbar sticky top-0 z-50">
    <div class="container mx-auto px-4">
      <div class="navbar">
        <!-- Logo -->
        <div class="navbar-start">
          <a href="{% url 'dashboard:index' %}" class="ut-logo">
            <img src="{% static 'UT_Logo_2400_Black_EN.png' %}" alt="University of Twente">
          </a>
          <span class="hidden md:inline-block ml-4 text-sm font-semibold text-base-content/70">
            Copyright Compliance Platform
          </span>
        </div>

        <!-- Mobile menu button -->
        <div class="navbar-end lg:hidden">
          <label for="mobile-menu-toggle" class="btn btn-square btn-ghost">
            <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24">
              <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 6h16M4 12h16M4 18h16"></path>
            </svg>
          </label>
        </div>

        <!-- Desktop Navigation -->
        <div class="navbar-center hidden lg:flex">
          <ul class="menu menu-horizontal px-1 gap-1">
            <li>
              <a href="{% url 'dashboard:index' %}" class="btn-ut">
                <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                  <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M3 12l2-2m0 0l7-7 7 7M5 10v10a1 1 0 001 1h3m10-11l2 2m-2-2v10a1 1 0 01-1 1h-3m-6 0a1 1 0 001-1v-4a1 1 0 011-1h2a1 1 0 011 1v4a1 1 0 001 1m-6 0h6"></path>
                </svg>
                Dashboard
              </a>
            </li>
            <li>
              <a href="{% url 'steps:index' %}" class="btn-ut">
                <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                  <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5H7a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2m-6 9l2 2 4-4"></path>
                </svg>
                Processing Steps
              </a>
            </li>
            {% if user.is_staff %}
            <li>
              <a href="/admin/" class="btn-ut">
                <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                  <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M10.325 4.317c.426-1.756 2.924-1.756 3.35 0a1.724 1.724 0 002.573 1.066c1.543-.94 3.31.826 2.37 2.37a1.724 1.724 0 001.065 2.572c1.756.426 1.756 2.924 0 3.35a1.724 1.724 0 00-1.066 2.573c.94 1.543-.826 3.31-2.37 2.37a1.724 1.724 0 00-2.572 1.065c-.426 1.756-2.924 1.756-3.35 0a1.724 1.724 0 00-2.573-1.066c-1.543.94-3.31-.826-2.37-2.37a1.724 1.724 0 00-1.065-2.572c-1.756-.426-1.756-2.924 0-3.35a1.724 1.724 0 001.066-2.573c-.94-1.543.826-3.31 2.37-2.37.996.608 2.296.07 2.572-1.065z"></path>
                  <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 12a3 3 0 11-6 0 3 3 0 016 0z"></path>
                </svg>
                Admin
              </a>
            </li>
            {% endif %}
          </ul>
        </div>

        <!-- User Menu -->
        <div class="navbar-end hidden lg:flex">
          <div class="dropdown dropdown-end">
            <div tabindex="0" role="button" class="btn btn-ghost btn-circle">
              <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z"></path>
              </svg>
            </div>
            <ul tabindex="0" class="menu menu-sm dropdown-content mt-3 z-[1] p-2 shadow bg-base-100 rounded-box w-52 border border-base-300">
              <li class="menu-title">{{ user.username }}</li>
              {% if user.is_authenticated %}
              <li>
                <form action="{% url 'admin:logout' %}" method="post" class="inline">
                  {% csrf_token %}
                  <button type="submit" class="flex items-center gap-2 w-full text-left">
                    <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                      <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M17 16l4-4m0 0l-4-4m4 4H7m6 4v1a3 3 0 01-3 3H6a3 3 0 01-3-3V7a3 3 0 013-3h4a3 3 0 013 3v1"></path>
                    </svg>
                    Logout
                  </button>
                </form>
              </li>
              {% else %}
              <li>
                <a href="/accounts/login/">
                  <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M11 16l-4-4m0 0l4-4m-4 4h14m-5 4v1a3 3 0 01-3 3H6a3 3 0 01-3-3V7a3 3 0 013-3h7a3 3 0 013 3v1"></path>
                  </svg>
                  Login
                </a>
              </li>
              {% endif %}
            </ul>
          </div>
        </div>
      </div>
    </div>

    <!-- Mobile Navigation Menu -->
    <input type="checkbox" id="mobile-menu-toggle" class="modal-toggle" />
    <div class="modal">
      <div class="modal-box">
        <h3 class="font-bold text-lg mb-4">Navigation</h3>
        <ul class="menu menu-vertical gap-2">
          <li>
            <a href="{% url 'dashboard:index' %}" onclick="document.getElementById('mobile-menu-toggle').click()">
              <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M3 12l2-2m0 0l7-7 7 7M5 10v10a1 1 0 001 1h3m10-11l2 2m-2-2v10a1 1 0 01-1 1h-3m-6 0a1 1 0 001-1v-4a1 1 0 011-1h2a1 1 0 011 1v4a1 1 0 001 1m-6 0h6"></path>
              </svg>
              Dashboard
            </a>
          </li>
          <li>
            <a href="{% url 'steps:index' %}" onclick="document.getElementById('mobile-menu-toggle').click()">
              <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5H7a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2"></path>
              </svg>
              Processing Steps
            </a>
          </li>
          {% if user.is_staff %}
          <li>
            <a href="/admin/" onclick="document.getElementById('mobile-menu-toggle').click()">
              <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M10.325 4.317c.426-1.756 2.924-1.756 3.35 0a1.724 1.724 0 002.573 1.066c1.543-.94 3.31.826 2.37 2.37a1.724 1.724 0 001.065 2.572c1.756.426 1.756 2.924 0 3.35a1.724 1.724 0 00-1.066 2.573c.94 1.543-.826 3.31-2.37 2.37a1.724 1.724 0 00-2.572 1.065c-.426 1.756-2.924 1.756-3.35 0a1.724 1.724 0 00-2.573-1.066c-1.543.94-3.31-.826-2.37-2.37a1.724 1.724 0 00-1.065-2.572c-1.756-.426-1.756-2.924 0-3.35a1.724 1.724 0 001.066-2.573c-.94-1.543.826-3.31 2.37-2.37.996.608 2.296.07 2.572-1.065z"></path>
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 12a3 3 0 11-6 0 3 3 0 016 0z"></path>
              </svg>
              Admin
            </a>
          </li>
          {% endif %}
        </ul>
        <div class="modal-action">
          <label for="mobile-menu-toggle" class="btn">Close</label>
        </div>
      </div>
      <label class="modal-backdrop" for="mobile-menu-toggle"></label>
    </div>
  </nav>

  <!-- Main Content -->
  <main class="container mx-auto px-4 py-6 flex-grow">
    {% if messages %}
    <div class="toast toast-end z-50">
      {% for message in messages %}
      <div class="alert alert-{{ message.tags|default:'info' }} shadow-lg">
        <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24">
          {% if message.tags == 'error' %}
          <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 8v4m0 4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"></path>
          {% elif message.tags == 'success' %}
          <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"></path>
          {% else %}
          <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"></path>
          {% endif %}
        </svg>
        <span>{{ message }}</span>
      </div>
      {% endfor %}
    </div>
    {% endif %}

    {% block content %}{% endblock %}
  </main>

  <!-- UT Footer -->
  <footer class="ut-footer mt-8">
    <div class="container mx-auto px-4">
      <div class="flex flex-col md:flex-row justify-between items-center gap-4">
        <div class="flex items-center gap-4">
          <img src="{% static 'UT_Logo_2400_White_EN.png' %}" alt="University of Twente" class="h-8">
          <span class="text-sm text-white/70">
            Copyright Compliance Platform
          </span>
        </div>
        <div class="text-sm text-white/60">
          Â© {% now "Y" %} University of Twente. All rights reserved.
        </div>
      </div>
    </div>
  </footer>

  <!-- UT Web Components -->
  <script type="module" src="{% static 'js/components/index.js' %}"></script>

  {% block extra_js %}{% endblock %}
</body>

</html>
